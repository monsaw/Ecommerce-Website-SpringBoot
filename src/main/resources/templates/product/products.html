<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>All Users</title>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css" />
</head>
<body>
<div th:replace="Fragments/headers :: header"></div>
<div class="container text-center" >

    <div>

            <p>
                Welcome <b>[[${#request.userPrincipal.principal.fullName}]]</b>
            </p>

    </div>
    <div>
        <h1>Welcome to Market Place </h1>
    </div>

    <div>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
            <tr>
                <th>Product ID</th>
                <th>Name</th>
                <th>Brand</th>
                <th>Made In</th>
                <th>Price</th>
                <th th:if="${#authentication.name != 'lawalmonsaw.lm@gmail.com'}">Action</th>
                <th colspan="2" th:if="${#authentication.name == 'lawalmonsaw.lm@gmail.com'}">Operations</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="product : ${listProducts}">
                <td th:text="${product.id}">id</td>
                <td th:text="${product.name}">name</td>
                <td th:text="${product.brand}">brand</td>
                <td th:text="${product.madein}">Made In</td>
                <td th:text="${product.price}">Price</td>
                <td><a th:href="@{'/buy/' + ${product.id}}" th:if="${#authentication.name != 'lawalmonsaw.lm@gmail.com'}">View</a></td>

                <td>
                    <a  th:if="${#authentication.name == 'lawalmonsaw.lm@gmail.com'}" th:href="@{'/edit/' + ${product.id}}">Edit</a>
                </td>

                <td>
                    <a  th:if="${#authentication.name == 'lawalmonsaw.lm@gmail.com'}" th:href="@{'/delete/' + ${product.id}}">Delete</a>
                </td>

            </tr>
            </tbody>

        </table>
    </div>

</div>

</body>
</html>